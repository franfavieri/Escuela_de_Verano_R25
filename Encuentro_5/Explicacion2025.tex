% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={Encuentro 5: Documentaci贸n en RMarkdown},
  pdfauthor={Francisco Favieri \textbar{} Beatriz Soria},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Encuentro 5: Documentaci贸n en RMarkdown}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{Escuela de Verano: Taller de Introducci贸n al procesamiento y
an谩lisis de datos sobre mercado de trabajo con R}
\author{Francisco Favieri \textbar{} Beatriz Soria}
\date{}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{2}
\tableofcontents
}
Material adaptado del trabajo realizado por Pablo Tiscornia

\subsubsection{R Markdown:
Introducci贸n}\label{r-markdown-introducciuxf3n}

Los archivos R Markdown nos permiten combinar c贸digo, resultados y
texto. El objetivo de este encuentro es aprender a trabajar bajo dicho
entorno para facilitar tres aplicaciones:

\begin{itemize}
\tightlist
\item
  Documentar el trabajo que realizamos, incluyendo comentarios sobre los
  procedimientos.
\item
  Compartir c贸digo y resultados con personas que tambi茅n trabajan en R.
\item
  Compartir resultados con personas que NO trabaja en R .
\end{itemize}

Las presentes notas de clase est谩n basadas en el libro
\href{https://es.r4ds.hadley.nz/r-markdown.html}{R4DS} y las
\href{https://www.rstudio.com/resources/cheatsheets/}{cheatsheets}.
Tambi茅n se recomienda el libro
\href{https://bookdown.org/yihui/rmarkdown/}{R Markdown: The Definitive
Guide}.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Requisitos}\label{requisitos}

Necesitamos instalar y cargar el paquete \textbf{rmarkdown}. Por lo
general, no hace falta hacerlo porque RStudio realiza esto
autom谩ticamente.

\subsubsection{Markdown b谩sico}\label{markdown-buxe1sico}

Se trata de un archivo de extensi贸n \textbf{.Rmd}. Contiene en su
estructura tres tipos importantes de contenido:

\begin{itemize}
\tightlist
\item
  Un encabezado YAML (\emph{``Yet another markup lenguage''}) rodeado de
  - - -
\end{itemize}

\begin{verbatim}
---
title: "El t铆tulo de nuestro informe"
date: Febrero 2025
output: html_document
---
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Bloques de c贸digo de R rodeado de ```.
\end{itemize}

\includegraphics{img/Selection_008.png}

\begin{itemize}
\tightlist
\item
  Texto con formato
\end{itemize}

Cuando abrimos un archivo \textbf{.Rmd}, obtenemos una interfaz de
notebook donde el c贸digo y el output se encuentran intercalados (en
lugar de aparecer el output s贸lo en la consola, panel de plots y/o
modificaciones en el entorno de trabajo).

Los bloques de c贸digo se pueden ejecutar haciendo click en el 铆cono
\textbf{ejecutar} (el bot贸n de \emph{Play} en la parte superior/derecha
del bloque), o presionando \texttt{Cmd/Ctrl\ +\ Shift\ +\ Enter}.
RStudio ejecuta el c贸digo y muestra los resultados incustrados en el
c贸digo.

Para producir un reporte completo que contenga todo el texto, c贸digo y
resultados, podemos clickear en \textbf{Knit} o presionar
\texttt{Cmd/Ctrl\ +\ Shift\ +\ K}. Esto mostrar谩 el reporte en el panel
\emph{Viewer} y crear谩 un archivo HTML independiente que podremos
compartir con otros.

\subsubsection{驴Qu茅 es ``knitear''?}\label{quuxe9-es-knitear}

En el contexto de RMarkdown, es el proceso que convierte un archivo .Rmd
(R Markdown) en un documento final en formatos como HTML, PDF o Word.

Este proceso es gestionado por el paquete knitr y ejecuta el c贸digo R
dentro del documento, integrando los resultados en el texto final.

 Para compilar manualmente un archivo .Rmd en RStudio, hacer clic en
el bot贸n ``Knit'' o usar el comando. \textbf{``Knit''} significa
\textbf{``tejer''} el documento combinando texto, c贸digo y resultados en
un formato legible.

\includegraphics{img/knit.png}

\subsubsection{Formateo de texto}\label{formateo-de-texto}

La prosa en los archivos .Rmd est谩 escrita en Markdown, una colecci贸n
simple de convenciones para dar formato a archivos de texto plano.
Markdown est谩 dise帽ado para ser f谩cil de leer y f谩cil de escribir,
siendo tambi茅n muy f谩cil de aprender. Del \emph{Cheatsheet}:

\includegraphics{img/Selection_001.png}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Bloques de c贸digo}\label{bloques-de-cuxf3digo}

Como ya mencionamos, para ejecutar c贸digo dentro de un documento R
Markdown, necesitamos insertar un bloque (\emph{Chunk}). Hay tres
maneras para hacerlo:

\begin{itemize}
\tightlist
\item
  El atajo de teclado \texttt{Cmd/Ctrl\ +\ Alt\ +\ I}
\item
  El icono ``Insertar'' en la barra de edici贸n
  (\texttt{Insert\ \textgreater{}\ R})
\item
  Tipear manualmente los delimitadores de bloque
  \texttt{\textasciigrave{}\textasciigrave{}\textasciigrave{}\{r\}} y
  \texttt{\textasciigrave{}\textasciigrave{}\textasciigrave{}}.
\end{itemize}

Obviamente, se recomienda usar el atajo de teclado porque, a largo
plazo, ahorra mucho tiempo. El c贸digo se puede seguir corriendo con
\texttt{Cmd/Ctrl\ +\ Enter} l铆nea a l铆nea. Sin embargo, los bloques de
c贸digo tienen otro atajo de teclado:
\texttt{Cmd/Ctrl\ +\ Shift\ +\ Enter}, que ejecuta todo el c贸digo en el
bloque.

Un bloque deber铆a ser relativamente aut贸nomo, y enfocado alrededor de
una sola tarea. Las siguientes secciones decriben el encabezado de
bloque que consiste en
\texttt{\textasciigrave{}\textasciigrave{}\textasciigrave{}\{r}, seguido
por un nombre opcional para el bloque, seguido entonces por
\textbf{opciones separadas por comas}, y concluyendo con \texttt{\}}.
Inmediatamente despu茅s sigue tu c贸digo de R el bloque y el fin del
bloque se indica con un
\texttt{\textasciigrave{}\textasciigrave{}\textasciigrave{}} final.

Hay un nombre de bloque que tiene comportamiento especial:
\texttt{setup}. Cuando nos encontramos en modo notebook, el bloque
llamado setup se ejecutar谩 autom谩ticamente una vez, antes de ejecutar
cualquier otro c贸digo.

\subsubsection{Opciones en los bloques de
c贸digo}\label{opciones-en-los-bloques-de-cuxf3digo}

La salida de los bloques puede personalizarse con \textbf{options},
argumentos suministrados en el encabezado del bloque. Knitr provee casi
60 opciones para que puedas usar para personalizar tus bloques de
c贸digo, la lista completa puede verse en
\url{http://yihui.name/knitr/options/}.

Las que m谩s utilizamos nosotros son:

\begin{itemize}
\item
  \texttt{eval\ =\ FALSE} evita que c贸digo sea evaluado. (Y obviamente
  si el c贸digo no es ejecutado no se generaran resultados). Esto es 煤til
  para mostrar c贸digos de ejemplo, o para deshabilitar un gran bloque de
  c贸digo sin comentar cada l铆nea.
\item
  \texttt{include\ =\ FALSE} ejecuta el c贸digo, pero no muestra el
  c贸digo o los resultados en el documento final. Usa esto para el c贸digo
  de configuracion que no quieres que abarrote tu reporte.
\item
  \texttt{echo\ =\ FALSE} evita que se vea el c贸digo, pero no los
  resultados en el archivo final. Utiliza esto cuando quieres escribir
  reportes enfocados a personas que no quieren ver el c贸digo subyacente
  de R.
\item
  \texttt{message\ =\ FALSE} o \texttt{warning\ =\ FALSE} evita que
  aparezcan mensajes o advertencias en el archivo final.
\item
  \texttt{results\ =\ \textquotesingle{}hide\textquotesingle{}} oculta
  el output impreso;
  \texttt{fig.show\ =\ \textquotesingle{}hide\textquotesingle{}} oculta
  gr谩ficos.
\item
  \texttt{error\ =\ TRUE} causa que el render contin煤e incluso si el
  c贸digo devuelve un error. Esto es algo que raramente quer茅s incluir en
  la version final de tu reporte.
\end{itemize}

Contamos con algunas de estas opciones en el men煤 de
\textbf{Configuraci贸n} en la parte superior-derecha del \emph{Chunk} de
c贸digo.

\subsubsection{Formatos}\label{formatos}

Hasta ahora vimos R Markdown para producir documentos HTML:

\begin{verbatim}
---
title: "Clase"  
output: html_document
---
\end{verbatim}

Para sobrescribir los par谩metros predeterminados se necesita usar un
campo de output extendido. Por ejemplo, si queremos generar un
\texttt{html\_document} con una tabla de contenido flotante, usamos:

\begin{verbatim}
---
title: "Clase"
output:
  html_document:
    toc: true
    toc_float: true
---
\end{verbatim}

Para los \texttt{html\_document} otra opci贸n es hacer que los fragmentos
de c贸digo est茅n escondidos por defecto, pero visibles con un
\emph{click}:

\begin{verbatim}
---
title: "Clase"
output:
  html_document:
    code_folding: hide
---
\end{verbatim}

\subsubsection{Otros formatos}\label{otros-formatos}

Hay todo un n煤mero de variaciones b谩sicas para generar diferentes tipos
de documentos:

\begin{itemize}
\item
  \texttt{pdf\_document} crea un PDF con LaTeX (un sistema de c贸digo
  abierto de composici贸n de textos), que necesitar谩s instalar. RStudio
  te notificar谩 si no lo tienes.
\item
  \texttt{word\_document} para documentos de Microsoft Word (.docx).
\item
  \texttt{odt\_document} para documentos de texto OpenDocument (.odt).
\end{itemize}

y m谩s!

\subsubsection{Notebooks}\label{notebooks}

Un notebook, \texttt{html\_notebook} (``cuaderno'' en espa帽ol), es una
variaci贸n de un \texttt{html\_document}. Las salidas de los dos
documentos son muy similares, pero tienen prop贸sitos distintos. Un
\texttt{html\_document} est谩 enfocado en la comunicaci贸n con los
encargados de la toma de decisiones, mientras que un notebook est谩
enfocado en colaborar con otros cient铆ficos de datos. Estos prop贸sitos
diferentes llevan a usar la salida HTML de diferentes maneras. Ambas
salidas HTML contendr谩n la salida renderizada, pero \textbf{el notebook
tambi茅n contendr谩 el c贸digo fuente completo}. Esto significa que podemos
usar el archivo \texttt{.nb.html} generado por el notebook de dos
maneras:

\begin{itemize}
\item
  Podemos verlo en un navegador web, y ver la salida generada. A
  diferencia del \texttt{html\_document}, esta renderizaci贸n siempre
  incluye una copia incrustada del c贸digo fuente que lo gener贸.
\item
  Podemos editarlo en RStudio. Cuando abramos un archivo
  \texttt{.nb.html}, RStudio autom谩ticamente recrear谩 el archivo
  \texttt{.Rmd} que lo cre贸.
\end{itemize}

\subsubsection{Publicar}\label{publicar}

Desde RStudio tenemos la posibilidad de publicar nuestros Markdown en
\href{https://rpubs.com/}{RPubs} de forma gratuita, desde el bot贸n
\textbf{Publish document}. Todo lo que subamos a nuestra cuenta de RPubs
ser谩 p煤blico.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Pr谩ctica}\label{pruxe1ctica}

\begin{enumerate}
\def\labelenumi{\arabic{enumi})}
\tightlist
\item
  Crear un informe que contenga:
\end{enumerate}

\begin{itemize}
\tightlist
\item
  \textbf{En TEXTO:}

  \begin{itemize}
  \tightlist
  \item
    Una estructura m铆nima de texto (T铆tulo, consigna, descripci贸n de las
    tareas realizadas y muy breve conclusi贸n)
  \end{itemize}
\item
  \textbf{En CDIGO:}

  \begin{itemize}
  \tightlist
  \item
    Carga de librer铆as (no mostrar el c贸digo en el reporte)
  \item
    Importaci贸n de datos (mostrar el c贸digo en el reporte)
  \item
    Alg煤n procesamiento m铆nimo como filtrar, seleccionar, generar un
    tabulado, etc. (mostrar el c贸digo y el resultado en el reporte)
  \end{itemize}
\item
  \emph{Extra}: Incluir un gr谩fico
\end{itemize}

\end{document}
